import { SquarePenIcon } from "lucide-react";
import Admonition from "@/components/admonitions";

export const lastModified = "2025-02-01";

# Neotoc Docs

A table of contents is really helpful on web pages with many sections. You can now easily generate a beautiful TOC, just like the one on the right.

## Get started

The easiest and simplest way to get started with Neotoc is with the `neotoc-playground` CLI. From your terminal, run one of the following commands based on your preference and follow the prompts.

```sh
npx neotoc-playground
pnpx neotoc-playground
yarn dlx neotoc-playground
bunx neotoc-playground
```

<Admonition type="info" title={"What are npx, pnpx, yarn dlx or bunx?"}>
These are commands from `npm`, `pnpm`, `yarn`, and `bun`, respectively. They let you fetch an npm package from the registry without installing it to your project or globally and run the default command binary it exposesâ€”perfect for our use case.
</Admonition>

It will create a neotoc playground with randomly generated dummy content based on your input. Run the dev server with command it prints to open the page in your browser.

To see the other ways you can create a neotoc playgroud or to learn to remake the dummy content again possibly with different preferences run the following:

```sh
npx neotoc-playground --help
```

Mess around and have fun!

## How to get `neotoc`?

To use `neotoc` you need to get it somehow. You can install it in your project using package managers like below:

```sh
npm add neotoc@1.0.0
pnpm add neotoc@1.0.0
yarn add neotoc@1.0.0
bun add neotoc@1.0.0
```

It is recommended to use the exact version to avoid any breaking changes.

You can also use CDN's like unpkg, jsdelivr, esm.sh.

## Requirements

For Neotoc to work properly, it expects two things:

- The headings you target must have unique IDs.
- The headings must appear in a logical order. By logical order, I mean:
  - The first heading found determines the highest level. For example, if you start with an `<h2>` heading, you should not use an `<h1>` heading later.
  - There should be no gaps between heading levels when progressing from top to bottom. For instance, after an `<h2>`, you should not use an `<h4>` without including an `<h3>` in between.

## Neotoc API

You can import the TOC UI generator function directly from the package as shown below:

```js
import neotoc from "neotoc";
```

You can rename `neotoc` to something else if you wish, as it is a default export.

<Admonition type="info" title="Info">
If you load neotoc as an UMD module from a CDN, then the TOC generator function will be available under the `neotoc` variable.
</Admonition>

`neotoc` accepts an options object and returns a cleanup function.

If you're using Neotoc in React or another library/framework, you'll likely need to call or return this function where it is required. If you are working with a vanilla HTML, CSS, and JS setup, you typically won't need to use the cleanup function.

Now, let's explore all of its options in detail.

### Options

#### `io` and `to`

Type of `io`: `string`<br/>
Type of `to`: `HTMLElement`

`io` is the ___only required___ option. To create a TOC, you must call `neotoc` with the `io` (input-output) option. Here, you need to answer three questions using CSS selectors separated by `>>`. For example:

```js
neotoc({ io: "article >> h2,h3,h4,h5,h6 >> nav" });
```

1. ___Where should it look for headings?___
    - Here, it's the `<article>` element.
2. ___Which headings should it consider for creating the TOC?___
    - Here, it's all headings from `<h2>` to `<h6>`.
3. ___Where should it append the generated TOC?___
    - Here, it's the `<nav>` element.

The last part of the `io` value can be _omitted_ if you need to provide the corresponding HTML element directly. You can use the `to` option for this purpose.

Note that if the 3rd part of the `io` option is specified, `to` option is ignored.

#### `title`

Type: `string`<br />
Default value: `"On this page"`

The title of the TOC UI that appears at the top left of it.

#### `fillAnchor`

Type: `(heading: HTMLHeadingElement) => string | Node`<br />
Default value: `(heading) => heading.textContent`

It is used to determine the content of anchor elements in the TOC. If your headings have a complex structure or contain elements like `<code>` or `<i>`, as seen on this page, and you want to display them in the TOC, this option can be useful.

<Admonition type="note" title="Note">
You can't have the same node in two places in the DOM. You will need to [clone](https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode) it.
</Admonition>

#### `onBreadcrumbChange`

Type: `(data: Breadcrumb) => void`<br />
Default value: `() => {}`

Here `Breadcrumb` type is:

```ts
type Breadcrumb = {
  content: string | Node;
  hash: string;
}[]
```

You can also import the type from Neotoc if needed.

This option allows you to create a breadcrumb similar to the one displayed in the header of this page. Neotoc provides the data at the right time but leaves the breadcrumb construction in your hands.

The value of `content` depends on what is returned from the `fillAnchor` option. You will need the `hash` if you want to create links for the breadcrumb items to jump to the parent section.

<Admonition type="note" title="Note: Cleaning up side effects">
Since Neotoc leaves breadcrumb construction to you, you will also need to clean up any side effects, if required. This is typically necessary when using it with a frontend library or framework.
</Admonition>

#### `ellipsis`

Type: `boolean`<br />
Default value: `false`

If `true`, overflowed text is truncated with ... instead of wrapping to the next line. When you hover over the anchor, the full text is displayed in the browser's default tooltip.

<Admonition type="tip" title="Tip">
When using `fillAnchor` with cloned heading nodes containing `<code>` elements, set their position to `static` in the TOC if it's not, to ensure the ellipsis appears correctly.
</Admonition>

#### `classPrefix`

Type: `string`<br />
Default value: `nt-`

All CSS classes assigned to elements in the TOC UI are prefixed with `nt-` by default to avoid class name collisions.

If the `nt-` prefix is already used in class names elsewhere on your page, you should set a different value here. Additionally, you'll need to update your Neotoc CSS to replace all occurrences of `nt-` with your chosen prefix.

#### `initialFoldLevel`

Type: `number`<br />
Default value: `6`

It should be a number from `1` to `6`.

If it is `1`, `<h1>` and all lower-level headings' corresponding sections in the TOC will be folded initially.

If it is `2`, `<h2>` and all lower-level headings' corresponding sections in the TOC will be folded initially.

And so on.

Note that if it is `6`, everything is unfolded initially since there is no `<h7>`.

#### `offsetTop` and `offsetBottom`

Type of both: `number`<br />
Unit: `px`<br />
Default value of both: `0`

Neotoc considers the portion of the nearest scroll container(usually the `<html>` element) cropped by the screen as its viewport.

This viewport is reflected in the TOC to highlight the relevant area.

You can lower the top edge of this viewport using the `offsetTop` option and raise the bottom edge of the viewport using `offsetBottom`.

This is useful if you have a fixed header or footer.

<Admonition type="note" title="Note: Nearest scroll container">
Here "nearest scroll container" refers to the nearest scroll container of the element matched by the first part of the `io` option.
</Admonition>

<Admonition type="tip" title="Tip: If you have fixed header...">
If you have a fixed header, to ensure the headings scroll to the correct position, you can use the CSS [`scroll-margin-top`](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin-top) property on the heading elements.
</Admonition>

#### `autoFold`

Type: `boolean`<br />
Default value: `false`

Whether or not to automatically fold/unfold the TOC based on what is in the viewport.

#### `autoScroll`

Type: `boolean`<br />
Default value: `true`

Whether or not to automatically scroll the TOC to keep the highlighted portion in view when the nearest scroll container is scrolled.

#### `autoScrollOffset`

Type: `number`<br />
Unit: `px`<br />
Default value: `50`

When `autoScroll` is `true`, this option allows you to control the distance the highlighted area should stay from the top and bottom edges of the main TOC UI (the element that by default has the class `.nt-body`) when possible.

#### `toggleFoldIcon`

Type: `string`<br />
Default value: [Chevron down icon(SVG)](https://icon-sets.iconify.design/charm/chevron-down/)

This icon is shown at the left of each anchor text on the TOC which has sub anchors underneath it to allow you to fold/unfold it. You can set another SVG icon here with this option.

#### `unfoldableIcon`

Type: `string`<br />
Default value: [Dot icon(SVG)](https://icon-sets.iconify.design/lucide/dot/)

This icon is shown at the left of each anchor text on the TOC which do not have sub anchors underneath it. You can set another SVG icon here with this option.

#### `foldIcon`

Type: `string`<br />
Default value: [Unfold less rounded icon(SVG)](https://icon-sets.iconify.design/material-symbols/unfold-less-rounded/)

This is used on the fold button on the header of the TOC. You can set another SVG icon here with this option.

#### `unfoldIcon`

Type: `string`<br />
Default value: [Unfold more rounded icon(SVG)](https://icon-sets.iconify.design/material-symbols/unfold-more-rounded/)

This is used on the unfold button on the header of the TOC. You can set another SVG icon here with this option.

#### `foldAllIcon`

Type: `string`<br />
Default value: [Unfold less double rounded icon(SVG)](https://icon-sets.iconify.design/material-symbols/unfold-less-double-rounded/)

This is used on the fold all button on the header of the TOC. You can set another SVG icon here with this option.

#### `unfoldAllIcon`

Type: `string`<br />
Default value: [Unfold more double rounded icon (SVG)](https://icon-sets.iconify.design/material-symbols/unfold-more-double-rounded/)

This is used on the unfold all button on the header of the TOC. You can set another SVG icon here with this option.

## Theming ðŸŽ¨ Make it yours

You can customize many aspects using CSS variables (i.e., custom properties).

<Admonition type="tip" title="Tip">
If you want to interactively change these variables and see the result on the page, you can use your browser's developer tools.
</Admonition>

### Colors

Changing the colors of different parts of the TOC UI is as simple as modifying the default values of the following CSS variables, which are defined on the root TOC UI element (with the default class `nt-widget`):

- `--bg`
- `--fg`
- `--bg-anchor-hover`
- `--bg-anchor-active`
- `--bg-sub-anchors`
- `--bg-header-btn`
- `--bg-header-btn-hover`
- `--bg-header-btn-active`
- `--bg-header-btn-disabled`
- `--fg-header-btn-disabled`
- `--border-header-btn`
- `--bg-toggle-fold-btn-hover`
- `--bg-toggle-fold-btn-active`
- `--indent-line`
- `--indent-line-highlight`
- `--fold-indicator-gradient-mid`
- `--light-bar`
- `--light-bar-tip-on-fold`
- `--light-opacity`

You can change colors responsively using media queries. Additionally, you can define different colors for light and dark modes using CSS selectors that match the color mode. With these variables, you can do anything that CSS allows.

### Sizes and duration

Here again, you can use CSS variables in the `.nt-widget`(by default) class to set the sizes of various elements and the folding duration. The variables are:

- `--height`
- `--header-height`
- `--relative-font-size`
- `--toggle-fold-btn-width`
- `--indent-line-gap`
- `--indent-line-width`
- `--anchor-padding-block`
- `--anchor-padding-inline`
- `--anchor-border-radius`
- `--padding-left`
- `--light-bar-width`
- `--light-bar-tip-radius`
- `--light-spread-length`
- `--folding-duration`

Of these, `--height` and `--header-height` are the ones youâ€™ll mostly want to modify, and they require some special attention. Letâ€™s cover them below:

#### `--height`

It describes the total height of the TOC widget (i.e., the element with the `.nt-widget` class by default). (Technically, it represents the maximum height, but you can easily modify it if needed. We'll cover this in the next section.)

Iâ€™ve set its value specifically for this website using external CSS variables. You can use any length value for the height based on your requirements.

Note that the TOC widget consists of two parts:
- __Header__: Contains the title and fold buttons. It has the class `nt-header` by default.
- __Body__: Contains the main content of the TOC. It has the class `nt-body` by default.

#### `--header-height`

I use a fixed height for this, allowing `--height` to define the full height of the TOC widget:

```css
/* This is in the FOUNDATION section */
.nt-body {
  max-height: calc(var(--height) - var(--header-height));
}
```

If you want it to have an exact height, simply use `height` instead of `max-height`.

### Beyond CSS variables

For advanced customization, you can modify any part of the CSS file to suit your needs.



<div className="mt-10">
  Found a typo? Other suggestions?<br />
  [<SquarePenIcon className="inline w-4 h-4 mr-1" />Edit this page on Github](https://github.com/ashutoshbw/neotoc/blob/main/apps/www/src/app/docs/docs.mdx)

  Last modified: {lastModified}
</div>
